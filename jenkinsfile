node('master'){

    stage('Checkout') {
        echo 'checkout repository'
        checkout scm

        echo 'restore NuGet Packages'
        bat 'nuget.exe restore RabbitChat.sln'
    }
    stage ('CreateAndConfigureWebApp') {
        echo 'Call Powershell'
        def msg = powershell(returnStdout: true, script: 'C:\scripts\ps_test.ps1')
        echo msg
    }
    stage('Build') {
        //bat "\"${tool 'MSBuild'}\" backend/TradeChangelog/Application.WebApp/Application.WebApp.csproj /p:PublishProfile=Dev_Environment;TargetFrameworkVersion=v4.6.1;DeployOnBuild=true;Password=${PASS_DEPLOYMENT};Username=${USER_DEPLOYMENT}"
        echo 'MsBuild'
    }
    stage('PostBuild') {
        echo 'Send Mail'
    }
}